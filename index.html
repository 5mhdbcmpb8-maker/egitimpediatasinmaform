<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Eğitimpedia | Veli Ön Görüşme Formu</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js for Premium 3D Fluid Experience -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Designer Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { --brand-orange: #f97316; --brand-dark: #0f172a; }
        
        * { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; box-sizing: border-box; }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            margin: 0; 
            background-color: #ffffff;
            overflow-x: hidden;
            color: var(--brand-dark);
            line-height: 1.6;
        }

        #bg-canvas { position: fixed; top: 0; left: 0; z-index: 0; pointer-events: none; }

        /* Sabitlenmiş Zarif Navigasyon */
        nav.sticky-header {
            z-index: 1000;
            position: sticky;
            top: 0;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(30px) saturate(180%);
            -webkit-backdrop-filter: blur(30px) saturate(180%);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .glass-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(50px) saturate(200%);
            border: 1px solid rgba(0, 0, 0, 0.04);
            box-shadow: 0 40px 120px -30px rgba(0,0,0,0.06);
        }

        /* Profesyonel Okunabilir Inputlar */
        .input-premium {
            background: #ffffff;
            border: 1px solid rgba(15, 23, 42, 0.1);
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            color: var(--brand-dark);
            font-weight: 600;
        }

        .input-premium:focus {
            border-color: var(--brand-orange);
            box-shadow: 0 0 0 5px rgba(249, 115, 22, 0.08);
            transform: translateY(-2px);
            outline: none;
        }

        /* Yüksek Kontrastlı Okunabilir Etiketler */
        label {
            color: #000000;
            font-weight: 800 !important;
            display: block;
            margin-bottom: 0.6rem;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
        }

        .btn-premium {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            letter-spacing: 0.15em;
            box-shadow: 0 10px 30px -10px rgba(234, 88, 12, 0.5);
        }

        .btn-premium:hover {
            transform: scale(1.04) translateY(-2px);
            box-shadow: 0 20px 40px -10px rgba(234, 88, 12, 0.4);
        }

        .fade-up { animation: fadeUp 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards; }
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        input[type="checkbox"], input[type="radio"] { 
            accent-color: var(--brand-orange); 
            width: 1.2rem; 
            height: 1.2rem; 
            cursor: pointer; 
        }

        .description-text {
            color: #475569;
            font-size: 0.82rem;
            line-height: 1.6;
            font-style: italic;
            margin-top: 0.5rem;
            font-weight: 500;
        }

        @media (max-width: 640px) {
            .mobile-p { padding: 1.5rem !important; }
            .mobile-header { padding: 4rem 1.5rem !important; }
            .mobile-title { font-size: 2.25rem !important; }
            section { margin-bottom: 5rem !important; }
        }
    </style>
</head>
<body class="selection:bg-orange-100">

    <canvas id="bg-canvas"></canvas>

    <nav class="sticky-header">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <img src="logo.png" alt="Logo" class="h-8 w-auto" onerror="this.src='https://via.placeholder.com/32x32?text=E';">
                <div class="h-5 w-px bg-slate-200"></div>
                <span class="text-sm font-black tracking-[0.25em] text-slate-900 uppercase">REHBERLİK</span>
            </div>
            <div class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">
                2025
            </div>
        </div>
    </nav>

    <main class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 py-12 sm:py-24">
        <div class="fade-up">
            
            <div id="form-container" class="glass-container rounded-[4rem] sm:rounded-[6rem] overflow-hidden">
                
                <header class="mobile-header p-12 sm:p-20 text-center border-b border-slate-50 bg-gradient-to-b from-white to-transparent">
                    <h1 class="mobile-title text-3xl sm:text-5xl font-black tracking-tighter text-slate-900 mb-6 leading-[0.95]">
                        Veli Ön Görüşme <span class="text-orange-500">Formu</span>
                    </h1>
                    <p class="text-slate-700 text-sm sm:text-lg font-bold max-w-2xl mx-auto leading-relaxed border-t border-slate-100 pt-8">
                        Bu form, ön görüşmeyi (20–25 dk) daha verimli hale getirmek ve size en uygun yol haritasını hazırlayabilmek için hazırlanmıştır. Kısa, net ve mümkünse somut örneklerle yanıtlamanız yeterli.
                    </p>
                </header>

                <form id="master-form" onsubmit="return handleMasterSubmit(event)" class="mobile-p p-10 sm:p-24 space-y-24 sm:space-y-36">
                    
                    <!-- 01 ÖĞRENCİ -->
                    <section class="space-y-12">
                        <div class="flex items-center space-x-6">
                            <span class="text-6xl sm:text-9xl font-black text-slate-100 leading-none select-none">01</span>
                            <h2 class="text-2xl sm:text-4xl font-extrabold tracking-tight">Öğrenci Bilgileri</h2>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 sm:gap-12">
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Öğrencinin Adı Soyadı</label>
                                <input type="text" name="ogrenci_ad" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Yaşı / Sınıfı</label>
                                <input type="text" name="ogrenci_yas_sinif" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                            <div class="sm:col-span-2">
                                <label class="uppercase tracking-widest text-orange-600 font-black">Mevcut Okulu</label>
                                <input type="text" name="mevcut_okul" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                        </div>
                    </section>

                    <!-- 02 VELİ -->
                    <section class="space-y-12">
                        <div class="flex items-center space-x-6">
                            <span class="text-6xl sm:text-9xl font-black text-slate-100 leading-none select-none">02</span>
                            <h2 class="text-2xl sm:text-4xl font-extrabold tracking-tight">İletişim Bilgileri</h2>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 sm:gap-12">
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Veli Adı Soyadı</label>
                                <input type="text" name="veli_ad" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Telefon Numarası</label>
                                <input type="tel" name="telefon" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">E-posta Adresi</label>
                                <input type="email" name="eposta" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Adres (İl / İlçe)</label>
                                <input type="text" name="adres" required class="input-premium w-full px-6 sm:px-8 py-5 rounded-2xl sm:rounded-3xl font-bold text-sm sm:text-base">
                            </div>
                        </div>
                    </section>

                    <!-- SORU 1 -->
                    <section class="space-y-10 pt-10 border-t border-slate-100">
                        <div class="space-y-4">
                            <h3 class="text-xl sm:text-3xl font-extrabold text-slate-900 leading-snug">1) Okul değişikliği gündeminiz</h3>
                            <p class="description-text">Taşınma planınız olduğunu biliyoruz. Okul değişikliği gündeminizde taşınma birincil neden mi? Taşınmanın dışında etkileyen başka faktörler var mı?</p>
                        </div>
                        <div class="grid grid-cols-1 gap-3">
                            <label class="flex items-center p-5 sm:p-7 bg-slate-50/40 hover:bg-white border border-transparent hover:border-orange-200 rounded-[2.5rem] transition-all group cursor-pointer">
                                <input type="checkbox" name="soru_1_choices" value="Birincil neden taşınma" class="mr-4">
                                <span class="text-sm font-bold group-hover:text-orange-700">Birincil neden taşınma</span>
                            </label>
                            <label class="flex items-center p-5 sm:p-7 bg-slate-50/40 hover:bg-white border border-transparent hover:border-orange-200 rounded-[2.5rem] transition-all group cursor-pointer">
                                <input type="checkbox" name="soru_1_choices" value="Taşınma + akademik beklenti" class="mr-4">
                                <span class="text-sm font-bold group-hover:text-orange-700">Taşınma + akademik beklenti</span>
                            </label>
                            <label class="flex items-center p-5 sm:p-7 bg-slate-50/40 hover:bg-white border border-transparent hover:border-orange-200 rounded-[2.5rem] transition-all group cursor-pointer">
                                <input type="checkbox" name="soru_1_choices" value="Taşınma + sosyal/uyum kaygısı" class="mr-4">
                                <span class="text-sm font-bold group-hover:text-orange-700">Taşınma + sosyal/uyum kaygısı</span>
                            </label>
                            <label class="flex items-center p-5 sm:p-7 bg-slate-50/40 hover:bg-white border border-transparent hover:border-orange-200 rounded-[2.5rem] transition-all group cursor-pointer">
                                <input type="checkbox" name="soru_1_choices" value="Taşınma + okul dili/programı" class="mr-4">
                                <span class="text-sm font-bold group-hover:text-orange-700">Taşınma + okulun dili/programı (IB/AP vb.)</span>
                            </label>
                            <label class="flex items-center p-5 sm:p-7 bg-slate-50/40 hover:bg-white border border-transparent hover:border-orange-200 rounded-[2.5rem] transition-all group cursor-pointer">
                                <input type="checkbox" name="soru_1_choices" value="Taşınma + sınav/gelecek planı" class="mr-4">
                                <span class="text-sm font-bold group-hover:text-orange-700">Taşınma + sınav/gelecek planı</span>
                            </label>
                            <div class="p-5 sm:p-7 bg-white rounded-[2.5rem] border border-dashed border-slate-200 flex items-center">
                                <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest mr-4">Diğer</span>
                                <input type="text" name="soru_1_diger" placeholder="Lütfen detaylandırın..." class="flex-1 bg-transparent outline-none text-sm font-bold">
                            </div>
                        </div>
                        <div class="space-y-2">
                            <label class="uppercase tracking-widest text-orange-600 font-black">Kısa açıklama (varsa)</label>
                            <textarea name="soru_1_aciklama" rows="2" class="input-premium w-full px-7 py-5 rounded-3xl outline-none text-sm font-bold"></textarea>
                        </div>
                    </section>

                    <!-- SORU 1A -->
                    <section class="space-y-12">
                        <h3 class="text-xl sm:text-3xl font-extrabold text-slate-900">1A) Taşınma</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Taşınma Tarihi (tahmini)</label>
                                <input type="text" name="tasinma_tarihi" class="input-premium w-full px-7 py-5 rounded-3xl outline-none font-bold text-sm">
                            </div>
                            <div>
                                <label class="uppercase tracking-widest text-orange-600 font-black">Planlanan İlçe / Semt</label>
                                <input type="text" name="planlanan_semt" class="input-premium w-full px-7 py-5 rounded-3xl outline-none font-bold text-sm">
                            </div>
                        </div>
                        
                        <div class="space-y-8">
                            <label class="uppercase tracking-widest text-orange-600 font-black">Okula ulaşım (tek yön) üst sınırınız:</label>
                            <div class="flex flex-wrap gap-4">
                                <label class="px-8 py-5 bg-white border border-slate-100 rounded-2xl text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-orange-500 hover:text-white transition-all"><input type="radio" name="ulasim_siniri" value="15 dk" class="hidden"> 15 dk</label>
                                <label class="px-8 py-5 bg-white border border-slate-100 rounded-2xl text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-orange-500 hover:text-white transition-all"><input type="radio" name="ulasim_siniri" value="30 dk" class="hidden"> 30 dk</label>
                                <label class="px-8 py-5 bg-white border border-slate-100 rounded-2xl text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-orange-500 hover:text-white transition-all"><input type="radio" name="ulasim_siniri" value="45 dk" class="hidden"> 45 dk</label>
                                <label class="px-8 py-5 bg-white border border-slate-100 rounded-2xl text-[10px] font-black uppercase tracking-widest cursor-pointer hover:bg-orange-500 hover:text-white transition-all"><input type="radio" name="ulasim_siniri" value="60 dk+" class="hidden"> 60 dk+</label>
                            </div>
                        </div>

                        <div class="space-y-12">
                            <label class="uppercase tracking-widest text-orange-600 font-black italic">"Olmazsa olmaz" 3 kriteriniz (en fazla 3):</label>
                            <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Eğitim dili" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Eğitim Dili</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Akademik seviye" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Akademik Seviye</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Rehberlik/psikolojik destek" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Psikolojik Destek</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Okul kültürü-disiplin" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Kültür / Disiplin</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Yabancı program" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Yabancı Program</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Spor/sanat imkanları" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Spor / Sanat</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Bütçe" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Bütçe</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Lokasyon/servis" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Lokasyon / Servis</span></label>
                                <label class="flex items-center p-5 bg-white/40 rounded-2xl border border-slate-100 cursor-pointer hover:bg-orange-50 transition-all"><input type="checkbox" name="kriter_choices" value="Sınıf mevcudu" class="criteria-box mr-3"> <span class="text-[9px] font-black uppercase">Sınıf Mevcudu</span></label>
                            </div>
                            <div class="p-6 bg-slate-50/20 rounded-3xl border border-dashed border-slate-200 flex items-center">
                                <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest mr-4">Diğer</span>
                                <input type="text" name="kriterler_diger" placeholder="Başka kriter?" class="flex-1 bg-transparent outline-none text-sm font-bold">
                            </div>
                            <div class="space-y-2">
                                <label class="uppercase tracking-widest text-orange-600 font-black">Kardeş / servis / lojistik notu (varsa)</label>
                                <textarea name="lojistik_notu" rows="2" class="input-premium w-full px-7 py-5 rounded-3xl outline-none text-sm font-bold"></textarea>
                            </div>
                        </div>
                    </section>

                    <!-- SORULAR 2-6 -->
                    <section class="space-y-24">
                        <div class="space-y-6">
                            <h3 class="text-xl sm:text-3xl font-extrabold text-slate-900 leading-tight">2) Okul değişikliği konusunda şu ana kadar attığınız adımlar?</h3>
                            <p class="description-text">(Araştırılan okullar, görüşmeler, ziyaretler, sınav kabul süreçleri vb.)</p>
                            <textarea name="atilan_adimlar" rows="5" class="input-premium w-full px-8 py-8 rounded-[3rem] outline-none font-bold text-sm sm:text-base"></textarea>
                        </div>

                        <div class="space-y-12">
                            <h3 class="text-xl sm:text-3xl font-extrabold text-slate-900 leading-tight">4) Bu süreçte bizden almak istediğiniz destek?</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Okul seçimi" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Okul seçimi ve yönlendirme</span>
                                </label>
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Akademik Değerlendirme" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Öğrencinin akademik – psikolojik değerlendirilmesi</span>
                                </label>
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Yol Haritası" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Aile – okul – öğrenci üçgeninde yol haritası</span>
                                </label>
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Sınav Planlama" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Sınav sürecine uygun okul planlaması</span>
                                </label>
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Geçiş süreci" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Geçiş süreci danışmanlığı</span>
                                </label>
                                <label class="flex items-center p-6 bg-white border border-slate-100 rounded-[2rem] cursor-pointer hover:bg-orange-50 transition-all group">
                                    <input type="checkbox" name="destek_choices" value="Mentorluk" class="mr-4"> 
                                    <span class="text-xs sm:text-sm font-bold group-hover:text-orange-700 uppercase">Genel eğitim koçluğu / mentorluk</span>
                                </label>
                                <div class="p-6 bg-slate-50/20 rounded-[2rem] border border-dashed border-slate-200 flex items-center sm:col-span-2">
                                    <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest mr-4">Diğer</span>
                                    <input type="text" name="destek_diger" placeholder="Belirtiniz..." class="flex-1 bg-transparent outline-none text-sm font-bold">
                                </div>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <h3 class="text-xl sm:text-3xl font-extrabold text-slate-900 leading-tight">6) Eklemek istediğiniz başka bir bilgi var mı?</h3>
                            <p class="description-text">(Akademik, sosyal, duygusal, öğrenme farklılıkları/sağlık, okul kültürü vb.)</p>
                            <textarea name="ek_bilgiler" rows="5" class="input-premium w-full px-8 py-8 rounded-[3rem] outline-none font-bold text-sm sm:text-base"></textarea>
                        </div>
                    </section>

                    <div class="pt-20 flex justify-center">
                        <button type="submit" id="submit-btn" class="btn-premium px-16 py-5 rounded-full text-white text-[11px] font-black uppercase shadow-2xl active:scale-95 transition-all">
                            BAŞVURUYU TAMAMLA
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer class="relative z-10 py-32 text-center">
        <div class="max-w-[100px] mx-auto h-0.5 bg-orange-200 rounded-full mb-10 opacity-30"></div>
        <p class="text-slate-400 text-[10px] font-black uppercase tracking-[0.6em] opacity-60">© 2025 Eğitimpedia Rehberlik</p>
    </footer>

    <script type="module">
        const G_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyWxsNISnLbtPvEmltn0ugC0AZm5Ir32W1YKxIJD6RXODV_QfJVhuERiby--Bch5vm3Wg/exec";
        const REDIRECT_URL = "https://meetings-eu1.hubspot.com/alikoc/mentorluk-tanisma-30dk-ali-koc";

        // Global function to stop standard form behavior and force redirect
        window.handleMasterSubmit = async function(e) {
            e.preventDefault();
            e.stopPropagation();

            const submitBtn = document.getElementById('submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = `<span class="inline-block animate-spin mr-3">◌</span> GÖNDERİLİYOR...`;

            try {
                const form = document.getElementById('master-form');
                const fd = new FormData(form);
                
                const finalData = {
                    timestamp: new Date().toLocaleString('tr-TR'),
                    ogrenci_ad: fd.get('ogrenci_ad') || "",
                    ogrenci_yas_sinif: fd.get('ogrenci_yas_sinif') || "",
                    mevcut_okul: fd.get('mevcut_okul') || "",
                    veli_ad: fd.get('veli_ad') || "",
                    telefon: fd.get('telefon') || "",
                    eposta: fd.get('eposta') || "",
                    adres: fd.get('adres') || "",
                    soru_1: Array.from(fd.getAll('soru_1_choices')).join(', ') + (fd.get('soru_1_diger') ? " (Diğer: " + fd.get('soru_1_diger') + ")" : ""),
                    soru_1_aciklama: fd.get('soru_1_aciklama') || "",
                    tasinma_tarihi: fd.get('tasinma_tarihi') || "",
                    planlanan_semt: fd.get('planlanan_semt') || "",
                    ulasim_siniri: fd.get('ulasim_siniri') || "",
                    kriterler: Array.from(fd.getAll('kriter_choices')).join(', ') + (fd.get('kriterler_diger') ? " (Diğer: " + fd.get('kriterler_diger') + ")" : ""),
                    lojistik_notu: fd.get('lojistik_notu') || "",
                    atilan_adimlar: fd.get('atilan_adimlar') || "",
                    destek: Array.from(fd.getAll('destek_choices')).join(', ') + (fd.get('destek_diger') ? " (Diğer: " + fd.get('destek_diger') + ")" : ""),
                    ek_bilgiler: fd.get('ek_bilgiler') || ""
                };

                // Post data silently to Google Sheets
                fetch(G_SCRIPT_URL, { 
                    method: 'POST', 
                    mode: 'no-cors', 
                    body: JSON.stringify(finalData) 
                });

                // Immediate forced redirect using window.top.location for iFrame/Canvas environments
                setTimeout(() => {
                    if (window.top !== window.self) {
                        window.top.location.href = REDIRECT_URL;
                    } else {
                        window.location.href = REDIRECT_URL;
                    }
                }, 400);

            } catch (err) {
                console.warn("Redirection initiated via fallback due to:", err);
                window.location.assign(REDIRECT_URL);
            }
            
            return false;
        };

        // Radio UI Handling
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', () => {
                const group = radio.name;
                document.querySelectorAll(`input[name="${group}"]`).forEach(r => {
                    r.parentElement.classList.remove('bg-orange-500', 'text-white', 'border-orange-500');
                    r.parentElement.classList.add('bg-white', 'border-slate-100');
                });
                if(radio.checked) {
                    radio.parentElement.classList.remove('bg-white', 'border-slate-100');
                    radio.parentElement.classList.add('bg-orange-500', 'text-white', 'border-orange-500');
                }
            });
        });

        // 3 Criteria Limit
        document.querySelectorAll('.criteria-box').forEach(cb => {
            cb.addEventListener('change', () => {
                if (document.querySelectorAll('.criteria-box:checked').length > 3) cb.checked = false;
            });
        });
    </script>

    <script>
        // Premium 3D Animation Logic
        const canvas = document.getElementById('bg-canvas');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.setSize(window.innerWidth, window.innerHeight);

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 12;

        const blobs = [];
        const colors = [0xf97316, 0xfb923c, 0xfdba74, 0xffedd5, 0xea580c];

        for(let i=0; i<6; i++) {
            const size = (Math.random() * 3) + 2.5;
            const geometry = new THREE.SphereGeometry(size, 64, 64);
            const material = new THREE.MeshPhongMaterial({
                color: colors[i % colors.length],
                transparent: true,
                opacity: 0.35,
                shininess: 140
            });
            const blob = new THREE.Mesh(geometry, material);
            blob.position.set((Math.random()-0.5)*25, (Math.random()-0.5)*25, (Math.random()-0.5)*8);
            blob.velocity = new THREE.Vector3((Math.random()-0.5)*0.015, (Math.random()-0.5)*0.015, 0);
            scene.add(blob);
            blobs.push(blob);
        }

        scene.add(new THREE.AmbientLight(0xffffff, 1.5));
        const pl = new THREE.PointLight(0xffffff, 1.8); pl.position.set(10, 20, 10); scene.add(pl);

        let mX = 0, mY = 0;
        window.addEventListener('mousemove', (e) => {
            mX = (e.clientX - window.innerWidth / 2) / 700;
            mY = (e.clientY - window.innerHeight / 2) / 700;
        });

        function animate() {
            requestAnimationFrame(animate);
            blobs.forEach((b) => {
                b.position.add(b.velocity);
                if(Math.abs(b.position.x) > 20) b.velocity.x *= -1;
                if(Math.abs(b.position.y) > 20) b.velocity.y *= -1;
                b.position.x += (mX * 0.7 - b.position.x) * 0.02;
                b.position.y += (-mY * 0.7 - b.position.y) * 0.02;
            });
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
        animate();
    </script>
</body>
</html>